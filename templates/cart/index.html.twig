{% extends 'base.html.twig' %}

{% block title %}Cart
{% endblock %}

{% block body %}
	<h1>Shopping Cart</h1>

	{% for message in app.flashes('success') %}
		<div class="alert alert-success">{{ message }}</div>
	{% endfor %}
	{% for message in app.flashes('error') %}
		<div class="alert alert-danger">{{ message }}</div>
	{% endfor %}

	{% if items %}
		<div class="cart-items">
			{% for item in items %}
				<div class="cart-item">
					<div class="item-info">
						{{ item.product.name }}
						- 
						                        Quantity:
						{{ item.quantity }}
						- 
						                        Price per unit:
						{{ item.product.price }}€ - 
						                        Subtotal:
						{{ (item.product.price * item.quantity)|number_format(2, '.', ',') }}€
					</div>
					<div class="cart-actions">
						<a href="{{ path('cart_increment', {'productId': item.product.id}) }}" class="btn btn-sm btn-secondary">+</a>
						<a href="{{ path('cart_decrement', {'productId': item.product.id}) }}" class="btn btn-sm btn-secondary">-</a>
						<a href="{{ path('cart_remove', {'productId': item.product.id}) }}" class="btn btn-sm btn-danger">Remove</a>
					</div>
				</div>
			{% endfor %}
		</div>
		<div class="cart-total">
			Total:
			{{ total }}€
		</div>
		<div class="cart-footer">
			<form action="{{ path('order_prepare') }}" method="post" class="confirm-order-form">
				<button type="submit" class="btn btn-primary">Confirm Order</button>
			</form>
			<a href="{{ path('cart_clear') }}" class="btn btn-warning">Clear Cart</a>
		</div>
	{% else %}
		<p>Your cart is empty.</p>
	{% endif %}
{% endblock %}
