{% extends 'base.html.twig' %}

{% block title %}My Products
{% endblock %}

{% block body %}
	<h1>My Products</h1>
	<div class="products">
		{% for product in products %}
			<div class="card">
				<img src="{{ product.imageUrl|default('/images/default-image.jpg') }}" alt="{{ product.name }}" class="card-img-top">
				<div class="card-body">
					<h5 class="card-title">{{ product.name }}</h5>
					<p class="card-text">{{ product.description|length > 100 ? product.description|slice(0, 100) ~ '...' : product.description }}</p>
					<div class="d-flex justify-content-between align-items-center">
						<div class="btn-group">
							<a href="{{ path('product_show', {'id': product.id}) }}" class="btn btn-view">View</a>
							<a href="{{ path('product_edit', {'id': product.id}) }}" class="btn btn-edit">Edit</a>
							<form method="post" action="{{ path('product_delete', {'id': product.id}) }}" onsubmit="return confirm('Are you sure you want to delete this product?');">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ product.id) }}">
								<button type="submit" class="btn btn-danger">Delete</button>
							</form>
						</div>
						<small class="text-muted">{{ product.price }}â‚¬</small>
					</div>
				</div>
			</div>
		{% else %}
			<p>You have not added any products yet.</p>
		{% endfor %}
	</div>
	<a href="{{ path('product_add') }}" class="btn btn-primary">Add New Product</a>
{% endblock %}
